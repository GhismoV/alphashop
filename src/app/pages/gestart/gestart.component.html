<section class="content-main" style="max-width: 760px">

  <div class="content-header">
  <h2 class="content-title">{{title}}</h2>
  <div>
    <button class="btn btn-outline-danger" (click)="abort()">Annulla</button>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">

  <div class="alert alert-primary" role="alert" *ngIf="this.respOp && this.respOp.code === '0'">
    {{this.respOp.message}}
  </div>
  <div class="alert alert-warning" role="alert" *ngIf="this.respOp && this.respOp.code !== '0'">
    {{this.respOp.message}}
  </div>

  <form (ngSubmit)="artTemplateForm.valid && this.salvaArticolo()" #artTemplateForm="ngForm">

  <!-- Codice, Barcode -->
  <div class="row gx-2">
    <div class="col-sm-6 mb-3">
      <label for="codArt" class="form-label">Codice Articolo:</label>
      <input id="codArt" name="codArt" type="text" placeholder="" class="form-control" [(ngModel)]="articolo.codArt" required minlength="5" maxlength="30" #vCodice="ngModel">
      <span style="color:red" *ngIf="vCodice.invalid && (vCodice.dirty || vCodice.touched)">Il codice articolo deve essere lungo tra 5  e 30 caratteri</span>
    </div>
    <div class="col-sm-6 mb-3">
      <label for="ean" class="form-label">Barcode:</label>
      <input id="ean" [disabled]="!this.isNuovoArticolo"  type="text" placeholder="" class="form-control" value ="{{getArticoloEan()}}">
    </div>
  </div>

  <!--Descrizione -->
  <div class="mb-4">
    <label class="form-label">Descrizione Articolo</label>
    <textarea placeholder="" name="desArt" class="form-control" rows="2" [(ngModel)]="articolo.descrizione" #vDescrArt="ngModel" required minlength="6" maxlength="80"></textarea>
    <span style="color:red" *ngIf="vDescrArt.invalid && (vDescrArt.dirty || vDescrArt.touched)">Il codice descrizione deve essere lungo tra 6  e 80 caratteri</span>
  </div>

  <!--Unità di misura, Iva -->
      <div class="row gx-2">
    <div class="col-sm-6 mb-3">
      <label class="form-label">Unità di Misura</label>
      <select class="form-select" name="um" [(ngModel)]="articolo.um">
        <option value="PZ"> Pezzi </option>
        <option value="LT"> Litri </option>
        <option value="KG"> Kilogrammi </option>
      </select>
    </div>
    <div class="col-sm-6 mb-3">
      <label class="form-label">Iva</label>
      <select name="idIva" class="form-select" [(ngModel)]="articolo.iva.idIva" required>
        <option [value]="-1">----Inserisci IVA ----</option>
        <option *ngFor="let aliquota of ivaList$" [ngValue]="aliquota.idIva">{{aliquota.descrizione}}</option>
      </select>
    </div>
  </div> <!-- row.// -->

  <!-- Pezzi per cartone, Peso, Prezzo, Valuta -->
      <div class="mb-4">
        <label class="form-label">Pezzi Per Cartone: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Peso Netto:</label>
          <div class="row gx-2">
            <div class="col-3">
              <input name="pezzi" placeholder="Pezzi" type="number" class="form-control" [(ngModel)]="articolo.pzCart" #vPzCart="ngModel" required max="99" >
              <span style="color:red;" *ngIf="vPzCart.invalid && (vPzCart.touched || vPzCart.dirty)">Il numero di pezzi nel cartone deve essere max 99</span>
            </div>
            <div class="col-3">
              <input name="peso" placeholder="Peso" type="text" class="form-control" [(ngModel)]="articolo.pesoNetto" #vPeso="ngModel" required maxlength="3">
              <span style="color:blue;" *ngIf="vPeso.invalid && (vPeso.dirty || vPeso.touched)">La lunghezza del peso deve essere massimo 3</span>
            </div>
            <div class="col-4">
        <input name="prezzo" placeholder="Prezzo" type="text" class="form-control" [(ngModel)]="articolo.prezzo">
      </div>
      <div class="col-2">
        <select class="form-select">
          <option> EUR </option>
          <option> USD </option>
          <option> GBP </option>
        </select>
      </div>
    </div>
  </div>

  <!-- Categoria, Stato Articolo -->
      <div class="row gx-2">
    <div class="col-sm-6 mb-3">
      <label class="form-label">Categoria:</label>
      <select name="famAssort" class="form-select" [(ngModel)]="articolo.famAssort.id">
        <option *ngFor="let cat of categorieList$" [ngValue]="cat.id">{{cat.id}} - {{cat.descrizione}}</option>
        <!--
        <option> Alimentare </option>
        <option> Banco </option>
        <option> Chimico </option>
        -->
      </select>
    </div>
      <div class="col-sm-6 mb-3">
      <label class="form-label">Stato:</label>
      <select name="idStatoArt" class="form-select" [(ngModel)]="articolo.idStatoArt">
        <option value=1> Attivo </option>
        <option value=2> Sospeso </option>
        <option value=3> Eliminato </option>
      </select>
      </div>
  </div> <!-- row.// -->

  <!-- Immagine -->
  <div class="mb-4">
    <label class="form-label">Immagine:</label>
    <input name="imageUrl" class="form-control" type="file" [(ngModel)]="articolo.imageUrl">
  </div>

    <br>
    <button type="submit" class="btn btn-primary" [disabled]="artTemplateForm.invalid">Salva Articolo</button>

  </form>

  </div>
</div>

</section>
